# 

## **ν”„λ΅μ‹ ν¨ν„΄ (Proxy Pattern)**

![img](./img/dp_proxy_pattern_1.png)

- κ°μ²΄μ— λ€ν• μ ‘κ·Όμ„ μ μ–΄ν•κΈ° μ„ν•΄ λ€λ¦¬ κ°μ²΄(ν”„λ΅μ‹)λ¥Ό μ κ³µν•λ” λ””μμΈ ν¨ν„΄
- ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ€μƒ κ°μ²΄(Real Subject)μ— μ ‘κ·Όν•μ§€ μ•κ³ , ν”„λ΅μ‹λ¥Ό ν†µν•΄ μ μ–΄

### μ ν•

| μ ν• | μ„¤λ… | λ€ν‘ μμ  |
| --- | --- | --- |
| **μ›κ²©(Remote) ν”„λ΅μ‹** | λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ μ›κ²© κ°μ²΄λ¥Ό νΈμ¶ | μ›κ²© API νΈμ¶, RMI, HTTP ν”„λ΅μ‹ |
| **κ°€μƒ(Virtual) ν”„λ΅μ‹** | λ¬΄κ±°μ΄ κ°μ²΄μ μƒμ„±μ„ μ§€μ—°(μ§€μ—° λ΅λ”©) | μ΄λ―Έμ§€ λ΅λ”©, ORM(Lazy Loading) |
| **λ³΄νΈ(Protection) ν”„λ΅μ‹** | μ ‘κ·Ό μ μ–΄(κ¶ν• κ΄€λ¦¬) | μ ‘κ·Ό κ¶ν• μ μ–΄ |
| **μΊμ‹±(Cache) ν”„λ΅μ‹** | μμ£Ό μ“°λ” λ°μ΄ν„°λ¥Ό μ €μ¥ν•μ—¬ μ„±λ¥ ν–¥μƒ | CDN, API μΊμ‹±, DB μΊμ‹± |
| **μ¤λ§νΈ(Smart) ν”„λ΅μ‹** | μ›λ κ°μ²΄μ— μ¶”κ°€ κΈ°λ¥ λ¶€μ—¬ | λ΅κΉ…, μ•”νΈν™”, νΈλμ­μ… |

### μμ : μ΄λ―Έμ§€ μ—…λ΅λ“

**μΈν„°νμ΄μ¤**

```java
public interface Image {
    void display();
}
```

**μ‹¤μ  κ°μ²΄**

```java
public class RealImage implements Image {
    private String filename;

    public RealImage(String filename) {
        this.filename = filename;
        loadFromDisk();
    }

    @Override
    public void display() {
        System.out.println("Displaying " + filename);
    }

    private void loadFromDisk() {
        System.out.println("Loading : " + filename);
    }
}
```

**κ°€μƒ ν”„λ΅μ‹**

μ‹¤μ λ΅ μ΄λ―Έμ§€λ” `display()` νΈμ¶ μ‹μ μ— λ΅λ“λλ‹¤.

```java
public class ProxyImage implements Image {
    private RealImage realImage;
    private String filename;

    public ProxyImage(String filename) {
        this.filename = filename;
    }

    @Override
    public void display() {
        if (realImage == null) {
            realImage = new RealImage(filename);  // μ‹¤μ  κ°μ²΄λ¥Ό μ²μ μ‚¬μ©ν•  λ• μƒμ„±
        }
        realImage.display();
    }
}
```

**ν΄λΌμ΄μ–ΈνΈ μ½”λ“**

ν΄λΌμ΄μ–ΈνΈλ” `ProxyImage`λ¥Ό μ‚¬μ©

```java
public class ProxyPattern {
    public static void main(String[] args) {
        Image image1 = new ProxyImage("image1.jpg");
        Image image2 = new ProxyImage("image2.jpg");

        // μ΄λ―Έμ§€κ°€ ν•„μ”ν•  λ• λ΅λ“
        image1.display();
        image2.display();
    }
}
```

**μ‹¤ν–‰ κ²°κ³Ό**

```
Loading : image1.jpg
Displaying image1.jpg
Loading : image2.jpg
Displaying image2.jpg
```


---

## **ν”„λ΅μ‹ μ„λ²„ (Proxy Server)**

![img](./img/dp_proxy_pattern_2.png)

- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ— μ„μΉν•μ—¬ μ”μ²­μ„ μ¤‘κ³„ν•λ” μ„λ²„
- λ³΄μ•, μ„±λ¥ μµμ ν™”, μµλ…μ„± λ³΄νΈ λ“±μ μ—­ν•  μν–‰
- λ³΄μ• κ°•ν™”, μ†λ„ κ°μ„ , μ°ν μ ‘μ†, λ΅κΉ… λ° νΈλν”½ κ΄€λ¦¬ λ“±

### **μ—­ν• **

| μ—­ν•  | μ„¤λ… | μμ‹ |
| --- | --- | --- |
| **λ³΄μ• κ°•ν™”** | μ‚¬μ©μμ μ‹¤μ  IPλ¥Ό μ¨κΈ°κ³ , λ°©ν™”λ²½ κΈ°λ¥ μν–‰ | VPN |
| **μΊμ‹± & μ†λ„ ν–¥μƒ** | μμ£Ό λ°©λ¬Έν•λ” νμ΄μ§€λ¥Ό μ €μ¥ν•μ—¬ λ΅λ”© μ†λ„ κ°μ„  | CDN |
| **μ ‘κ·Ό μ ν•** | νΉμ • μ›Ήμ‚¬μ΄νΈ μ°¨λ‹¨, κΈ°μ—…/ν•™κµμ μΈν„°λ„· μ •μ±… μ μ© | μ‚¬λ‚΄ λ‚΄λ¶€λ§ |
| **λ΅κ·Έ & λ¨λ‹ν„°λ§** | μ‚¬μ©μ νΈλν”½ κΈ°λ΅, λ„¤νΈμ›ν¬ λ¶„μ„ λ° κ°μ‚¬ | κΈ°μ—… λ³΄μ• κ΄€λ¦¬, μ •λ¶€ κ°μ‹ |
| **μ°ν μ ‘μ†** | μ°¨λ‹¨λ μ‚¬μ΄νΈλ‚ μ§€μ—­ μ ν• μ½ν…μΈ  μ ‘κ·Ό κ°€λ¥ | μ νλΈ, λ„·ν”λ¦­μ¤ μ°ν |

### **μ ν•**

| μ ν• | μ„¤λ… | μμ  |
| --- | --- | --- |
| **μ •λ°©ν–¥(Forward) ν”„λ΅μ‹** | ν΄λΌμ΄μ–ΈνΈ β†’ ν”„λ΅μ‹ μ„λ²„ β†’ μΈν„°λ„· | κΈ°μ—… λ‚΄λ¶€λ§, VPN |
| **μ—­λ°©ν–¥(Reverse) ν”„λ΅μ‹** | ν΄λΌμ΄μ–ΈνΈ β†’ ν”„λ΅μ‹ μ„λ²„ β†’ λ‚΄λ¶€ μ„λ²„ | λ΅λ“ λ°Έλ°μ‹±, Nginx |
| **νΈλμ¤νμ–΄λ°νΈ(Transparent) ν”„λ΅μ‹** | ν΄λΌμ΄μ–ΈνΈκ°€ ν”„λ΅μ‹λ¥Ό μΈμ‹ν•μ§€ λ»ν•¨ | κΈ°μ—…, κ³µκ³µ μ™€μ΄νμ΄ |
| **κ³µκ°(Open) ν”„λ΅μ‹** | λ„κµ¬λ‚ μ‚¬μ©ν•  μ μλ” ν”„λ΅μ‹ | λ¬΄λ£ ν”„λ΅μ‹ μ„λ²„ |

## ν”„λ΅μ‹ ν¨ν„΄κ³Ό μ„λ²„

|  | ν”„λ΅μ‹ ν¨ν„΄ | ν”„λ΅μ‹ μ„λ²„ |
| --- | --- | --- |
| κ°λ… | κ°μ²΄ μ•μ— λ€λ¦¬ κ°μ²΄(Proxy)λ¥Ό λ‘μ–΄ κ°„μ ‘ μ ‘κ·Ό | ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ—μ„ μ”μ²­μ„ μ¤‘κ³„ |
| μ£Όμ” λ©μ  | μ„±λ¥ μµμ ν™”, μ ‘κ·Ό μ μ–΄, λ΅κΉ… | λ³΄μ• κ°•ν™”, μΊμ‹±, μµλ…μ„± μ κ³µ |
| μ‚¬μ© μ„μΉ | μ• ν”λ¦¬μΌ€μ΄μ… λ‚΄λ¶€ (μ½”λ“ λ λ²¨) | λ„¤νΈμ›ν¬ κµ¬μ΅° (ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ μ‚¬μ΄) |

---
## **ν”„λ΅μ‹ μ„λ²„ μ™€ VPN**

### **ν”„λ΅μ‹ μ„λ²„ (Proxy Server)**

- νΉμ • μ• ν”λ¦¬μΌ€μ΄μ…(μ›Ή λΈλΌμ°μ €, νΉμ • ν”„λ΅κ·Έλ¨)μ μ”μ²­λ§ μ¤‘κ³„
- IP μ£Όμ†λ¥Ό λ³€κ²½ν•κ±°λ‚ μ›Ή μ½ν…μΈ  ν•„ν„°λ§ λ“±μ— μ‚¬μ©
- νΈλν”½μ΄ **μ•”νΈν™”λμ§€ μ•μΌλ©°**, λ³΄μ•λ³΄λ‹¤λ” μ°ν λ° μΊμ‹±μ΄ μ£Όλ©μ 

### **VPN (Virtual Private Network)**

- μ‚¬μ©μμ **λ¨λ“  λ„¤νΈμ›ν¬ νΈλν”½μ„ μ•”νΈν™”**ν•μ—¬ λ³΄νΈ
- **μ‚¬μ©μμ μ „μ²΄ μΈν„°λ„· νΈλν”½μ„ λ³΄νΈ**ν•μ—¬, μ„μΉλ¥Ό μ¨κΈ°κ³  κ°μ²­μ„ λ°©μ§€
- κ³µμ© λ„¤νΈμ›ν¬μ—μ„λ„ μ•μ „ν• ν†µμ‹ μ„ λ³΄μ¥

|  | ν”„λ΅μ‹ μ„λ²„ | VPN  |
| --- | --- | --- |
| **λ™μ‘ λ°©μ‹** | νΉμ • μ”μ²­(HTTP/HTTPS, DNS λ“±)λ§ μ¤‘κ³„ | λ¨λ“  λ„¤νΈμ›ν¬ νΈλν”½μ„ μ•”νΈν™”ν•μ—¬ ν„°λ„λ§ |
| **λ³΄μ• μμ¤€** | λ‚®μ (μΌλ°μ μΌλ΅ μ•”νΈν™” μ—†μ) | λ†’μ (λ¨λ“  νΈλν”½ μ•”νΈν™”) |
| **IP μ¨κΉ€ κΈ°λ¥** | μΌλ¶€ κ°€λ¥ (μ›Ήμ‚¬μ΄νΈμ—λ” μ¨κ²¨μ§) | μ „μ²΄ λ„¤νΈμ›ν¬μ—μ„ IP μ¨κΉ€ |
| **μ†λ„** | λΉ λ¦„ (μΊμ‹± ν™μ© κ°€λ¥) | μƒλ€μ μΌλ΅ λλ¦Ό (μ•”νΈν™”λ΅ μΈν• μ¤λ²„ν—¤λ“ λ°μƒ) |
| **μµλ…μ„±** | μ ν•μ  (μ›Ή νΈλν”½λ§ λ³΄νΈ) | κ°•λ ¥ν• μµλ…μ„± λ³΄μ¥ |
| **μ‚¬μ© λ©μ ** | μ›Ή ν•„ν„°λ§, μΊμ‹±, μ°¨λ‹¨λ μ½ν…μΈ  μ°ν | λ³΄μ• κ°•ν™”, λ°μ΄ν„° μ•”νΈν™”, κ°μ‹ νν”Ό |

**ν”„λ΅μ‹ μ„λ²„** β†’ νΉμ • μ”μ²­λ§ μ¤‘κ³„ (μ›Ή ν•„ν„°λ§, IP λ³€κ²½, μΊμ‹±)

**VPN** β†’ λ¨λ“  λ„¤νΈμ›ν¬ νΈλν”½μ„ μ•”νΈν™”ν•μ—¬ λ³΄μ• κ°•ν™”

π‘‰ **λ³΄μ•μ΄ μ¤‘μ”ν•λ‹¤λ©΄ VPNμ„, λ‹¨μν• IP μ°νλ‚ μΊμ‹±μ΄ ν•„μ”ν•λ‹¤λ©΄ ν”„λ΅μ‹λ¥Ό μ‚¬μ©**

---

[https://inpa.tistory.com/entry/GOF-π’ -ν”„λ΅μ‹Proxy-ν¨ν„΄-μ λ€λ΅-λ°°μ›λ³΄μ](https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%ED%94%84%EB%A1%9D%EC%8B%9CProxy-%ED%8C%A8%ED%84%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90)

https://refactoring.guru/design-patterns/proxy

[https://effectiveprogramming.tistory.com/entry/Proxy-ν¨ν„΄κ³Ό-κ·Έ-ν™μ©](https://effectiveprogramming.tistory.com/entry/Proxy-%ED%8C%A8%ED%84%B4%EA%B3%BC-%EA%B7%B8-%ED%99%9C%EC%9A%A9) 

https://nordvpn.com/ko/blog/proxy-versus-vpn/
https://www.cloudflare.com/ko-kr/learning/cdn/glossary/reverse-proxy/